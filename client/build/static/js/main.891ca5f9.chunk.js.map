{"version":3,"sources":["components/navbar/navbar.js","components/navbar/index.js","assets/empty-icon.svg","components/window/window.js","components/window/index.js","components/button/button.js","components/button/index.js","components/table/table.js","components/table/index.js","components/data-table/data-table.js","components/data-table/index.js","components/meal-plan/meal-plan.js","components/meal-plan/index.js","api/auth.js","components/meal-plan-page/meal-plan-page.js","components/meal-plan-page/index.js","components/input/input.js","components/input/radio-group.js","components/input/select.js","components/input/slider.js","components/input/checkbox-group.js","components/input/index.js","errors.js","components/form/form.js","components/form/index.js","components/data-square/data-square.js","components/data-square/index.js","components/result-section/result-section.js","components/result-section/index.js","components/model-info-section/model-info-section.js","components/model-info-section/index.js","components/model/model.js","components/model/model-router.js","components/model-link/model-link.js","components/model-link/index.js","components/models-page/models-page.js","components/models-page/index.js","components/login/login.js","components/login/index.js","components/register/register.js","components/register/index.js","components/auth-modal/auth-modal.js","components/auth-modal/index.js","components/preferences-page/preferences-page.js","components/preferences-page/index.js","App.js","index.js"],"names":["Navbar","title","size","position","children","stickToEnd","zIndex","fontSize","childrenArray","React","Children","toArray","map","child","index","className","atStart","slice","length","atEnd","sizeStyle","width","height","titleSizeStyle","style","defaultProps","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","SvgEmptyIcon","_ref","svgRef","titleId","props","viewBox","ref","id","ForwardRef","Window","blank","empty","emptyText","blankStyle","emptyWindow","split","line","types","Button","type","corner","submit","text","onClick","disabled","color","formHeight","buttonColorStyle","cornerStyle","buttonCornerStyle","button","value","Table","content","cols","header","boldRows","centeredCols","tableHeader","label","tableBody","row","el","idx","colWidth","minWidth","colAlign","includes","textAlign","isNaN","Number","toFixed","leaders","dots","centeredDots","none","sizes","small","normal","large","DataTable","name","fields","leader","dataFields","separator","colorScheme","field","sign","unit","accuracy","MEAL_NAMES","2","3","4","5","6","7","COLUMN_NAMES","MealPlan","plan","mealNames","mealPlan","meal","mealNo","jwtDecode","require","setTokenPair","pair","localStorage","setItem","access","refresh","console","log","refreshToken","data","getItem","status","logout","fetch","method","body","JSON","stringify","headers","then","res","json","Promise","resolve","reject","ok","retryRequest","req","url","isPOST","FETCH_OPTIONS","token","POST_FETCH_OPTIONS","NUTRIENTS","FETCH_PLANS_URL","GENERATE_PLAN_URL","AUTHORIZATION_HEADER","MealPlanPage","auth","onAuth","onPlanRequest","awaitingNewPlan","useState","setPlans","parsedPlans","setParsedPlans","totalNutrients","setTotalNutrients","currentPlan","setCurrentPlan","parsePlan","rawPln","NAN_FIELDS","rawPlan","portions","planSize","parsed","Array","totalMainNutrients","allNutrients","forEach","rawPortion","portion","entries","mainNutrients","protein","fat","carbohydrate","energy","v","nutrient","generateNewPlan","prev","planParsed","planNutrients","catch","err","error","changeSelectedPlan","dir","numberOfPlans","useEffect","nutrients","push","filter","domtoimage","toPng","document","querySelector","bgcolor","dataUrl","link","createElement","download","href","click","Input","validityErrors","onChange","placeholder","maxLength","displayErrors","subtype","errorBorderStyle","errorLabelStyle","RadioGroup","options","radios","option","selectedOptionStyle","checked","Select","double","dropdownWidth","isExpanded","setIsExpanded","doubleSizeStyle","doubleSizeDropdownStyle","handleSelect","e","currentTarget","selected","description","selectable","dropdown","Slider","intValue","setIntValue","findIndex","min","max","step","CheckboxGroup","layout","tooltipWidth","labelWidths","setLabelWidths","ro","ResizeObserver","entry","checkboxName","dataset","join","contentRect","querySelectorAll","node","observe","handleChange","values","Set","add","delete","Error","tooltip","data-name","rows","val","splice","VALIDATION_ERRORS","0","p","VALIDATION_ERRORS_ALL","AUTH_GET_TOKEN_ERRORS","401","Form","formTitle","submitUrl","submitText","singleErrorList","columns","sections","dataToSend","withAuth","onResponse","errorsToDisplay","onFieldChange","useCookies","cookies","setValues","setValidityErrors","regexs","reduce","ac","RegExp","regex","required","withMinLength","minLength","initValues","initialValue","initValidityErrors","setValidityError","fieldName","errID","errState","errParam","requiredFieldCheck","isError","test","minLengthCheck","allErrorMessages","inputs","errors","errorMessages","msg","formValidityErrors","sectioned","section","sectionInputs","sectionCols","repeat","sectionDelimeter","onSubmit","CSRFheader","csrftoken","authHeader","noReqFieldsEmpty","allFields","noErrors","allErrors","validateFields","preventDefault","noValidate","autoComplete","DataSquare","alternativeUnits","mainField","rate","ResultSection","input","result","model","layoutStyle","sourceFields","fieldValue","find","dataSquare","ModelInfoSection","points","metricsTable","metric","margin","top","right","bottom","left","xScale","xFormat","yScale","yFormat","nodeSize","colors","axisTop","axisRight","axisBottom","orient","tickSize","tickPadding","tickRotation","legend","legendPosition","legendOffset","axisLeft","parseModel","opt","fromEntries","k","toLowerCase","Model","request","to","MODEL_NAME","form","MODEL_TITLE","resultSection","ModelRouter","models","results","setResults","requests","setRequests","modelName","useParams","m","ModelLink","exact","activeClassName","ModelsPage","setModels","modelLinks","MODEL_DESCRIPTION","path","Login","username","onSuccess","setErrors","setFields","user","loginForm","Register","registrationForm","AuthModal","forms","setForms","state","setState","setUsername","login","tokens","register","titleBlock","marginBottom","FETCH_FORMS_URL","dummyNutrients","dummyNutrients2","PreferencesPage","toMealPlan","setToMealPlan","fetchForms","setNewRequirements","requirements","handleResponse","physParamsPALGoalForm","foodPrefsForm","energySquares","square","macronutrientsTable","App","location","useLocation","setAuth","setAwaitingNewPlan","isAuth","accessToken","payload","exp","Date","now","checkAuth","checkRefresh","authModal","pathname","removeItem","render","component","ReactDOM","StrictMode","CookiesProvider","getElementById"],"mappings":"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","file":"static/js/main.891ca5f9.chunk.js","sourcesContent":["import React from 'react'\r\nimport './navbar.css'\r\n  \r\nfunction Navbar({ title, size, position, children, stickToEnd, zIndex, fontSize }) {\r\n  \r\n  let childrenArray = React.Children.toArray(children).map((child, index) => \r\n    <div key={index} className='navbar_child'>{child}</div>\r\n  )\r\n  let atStart = childrenArray.slice(0, childrenArray.length - stickToEnd)\r\n  let atEnd = childrenArray.slice(childrenArray.length - stickToEnd)\r\n\r\n  let sizeStyle = size && position === 'vertical' ? { width: size } : { height: size }\r\n\r\n  let titleSizeStyle = fontSize ? { fontSize } : {}\r\n  return (\r\n    <div style={{ ...sizeStyle, zIndex }} className={`navbar navbar__${position}`}>\r\n      <div className='navbar_header'>\r\n        <div className=\"navbar_title\" style={titleSizeStyle}>{title}</div>\r\n        <div className='navbar_divider'></div>\r\n      </div>\r\n      <div className='navbar_body'>\r\n        <div className='navbar_children'>{atStart}</div>\r\n        <div className='navbar_children__end'>{atEnd}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nNavbar.defaultProps = {\r\n  position: 'vertical',\r\n  stickToEnd: 0,\r\n  title: 'Navbar',\r\n  zIndex: null\r\n}\r\n  \r\nexport default Navbar\r\n","import Navbar from './navbar'\r\n\r\nexport default Navbar","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M85.365 43.085H81.535H77.676H73.846H69.986H66.156H62.296V46.945H66.156H69.986H73.846H77.676H81.535H85.365H89.226V43.085H85.365Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M81.535 77.705H77.676V81.535H81.535V77.705Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M81.535 8.465H77.676V12.325H81.535V8.465Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M77.676 73.846H73.846V77.705H77.676V73.846Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M77.676 12.325H73.846V16.155H77.676V12.325Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M73.845 70.016H69.986V73.846H73.845V70.016Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M73.845 16.155H69.986V20.015H73.845V16.155Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M69.986 66.154H66.156V70.015H69.986V66.154Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M69.986 20.015H66.156V23.845H69.986V20.015Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M66.156 62.324H62.296V66.154H66.156V62.324Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M66.156 23.845H62.296V27.705H66.156V23.845Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M62.296 58.465H58.466V62.324H62.296V58.465Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M62.296 27.705H58.466V31.535H62.296V27.705Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M43.056 66.154V70.016V73.846V77.705V81.535V85.395V89.225H46.916V85.395V81.535V77.705V73.846V70.016V66.154V62.324H43.056V66.154Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M43.056 4.635V8.465V12.325V16.155V20.015V23.845V27.705H46.916V23.845V20.015V16.155V12.325V8.465V4.635V0.775002H43.056V4.635Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M31.535 58.465H27.676V62.324H31.535V58.465Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M31.535 27.705H27.676V31.535H31.535V27.705Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref19 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M27.676 62.324H23.846V66.154H27.676V62.324Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref20 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M27.676 23.845H23.846V27.705H27.676V23.845Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref21 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.845 66.154H19.986V70.015H23.845V66.154Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref22 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.845 20.015H19.986V23.845H23.845V20.015Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref23 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.986 70.016H16.156V73.846H19.986V70.016Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref24 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.986 16.155H16.156V20.015H19.986V16.155Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref25 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.156 73.846H12.296V77.705H16.156V73.846Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref26 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.156 12.325H12.296V16.155H16.156V12.325Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref27 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.296 77.705H8.466V81.535H12.296V77.705Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref28 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.296 46.945H16.156H19.986H23.846H27.676V43.085H23.846H19.986H16.156H12.296H8.46599H4.60499H0.774994V46.945H4.60499H8.46599H12.296Z\",\n  fill: \"#9EABA5\"\n});\n\nvar _ref29 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.296 8.465H8.466V12.325H12.296V8.465Z\",\n  fill: \"#9EABA5\"\n});\n\nfunction SvgEmptyIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 90,\n    height: 90,\n    viewBox: \"0 0 90 90\",\n    fill: \"none\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEmptyIcon);\nexport default __webpack_public_path__ + \"static/media/empty-icon.d99b8f09.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\nimport './window.css'\r\nimport { ReactComponent as EmptyIcon } from '../../assets/empty-icon.svg'\r\n  \r\nfunction Window({title, width, blank, children, className, style, empty, emptyText }) {\r\n  let blankStyle = blank ? ' window__blank' : ''\r\n\r\n  let emptyWindow = (\r\n    <div className={'window window__empty' + ' ' + className} style={{ width, ...style}}>\r\n      {title && <div className='window_title'><h2>{title}</h2></div>}\r\n      <div className=\"window_body\">        \r\n        <div className=\"window__empty-icon\"><EmptyIcon /></div>\r\n        <div className=\"window__empty-text\">{emptyText.split('\\\\').map(line => <>{line}<br/></>)}</div>\r\n      </div>      \r\n    </div>\r\n  )\r\n  if (empty) return emptyWindow\r\n\r\n  return (\r\n    <div className={'window' + blankStyle + ' ' + className} style={{ width, ...style}}>\r\n      {!blank && title && <div className='window_title'><h2>{title}</h2></div>}\r\n      <div className=\"window_body\">{children}</div>      \r\n    </div>\r\n  )\r\n}\r\nWindow.defaultProps = {\r\n  blank: false,\r\n  style: {},\r\n  empty: false,\r\n  emptyText: 'Здесь ничего нет.',\r\n  className: ''\r\n }\r\n  \r\nexport default Window\r\n","import Window from './window'\r\n\r\nexport default Window","import React from 'react'\r\nimport './button.css'\r\n  \r\n\r\nconst types = {\r\n  'form': ' form-button',\r\n  'corner': ' corner-button'\r\n}\r\n//  corner only for coren-button\r\nfunction Button({ type, corner, submit, text, onClick, disabled, color, formHeight, className, style }) {\r\n  let buttonColorStyle = types[type] + '_btn__' + color\r\n  let cornerStyle = corner ? '__' + corner : ''\r\n  let buttonCornerStyle = corner ? types[type] + '_btn' + cornerStyle : ''\r\n\r\n  let button = submit ?\r\n    <input className={className + types[type] + '_btn' + buttonColorStyle + buttonCornerStyle} \r\n      disabled={disabled} onClick={onClick} type='submit' value={text} style={style} />      \r\n  : \r\n    <button className={className + types[type] + '_btn' + buttonColorStyle + buttonCornerStyle} \r\n      disabled={disabled} onClick={onClick} style={style} >{text}</button>\r\n\r\n  return (\r\n    <div className={types[type] + types[type] + cornerStyle}>\r\n      {button}\r\n    </div>    \r\n  )\r\n\r\n\r\n}\r\nButton.defaultProps = {\r\n  type: 'form',\r\n  submit: false,\r\n  corner: '',\r\n  text: '',\r\n  disabled: false,\r\n  color: 'green',\r\n  className: ''\r\n}\r\n  \r\nexport default Button\r\n","import Button from './button'\r\n\r\nexport default Button","import React from 'react'\r\nimport './table.css'\r\n\r\n// content: [[1,2,3],[4,5,6]]\r\n// header: [a,b,c]\r\n// cols: [20, 40, 40] - width of cols\r\n// boldRows [0, 4]\r\nfunction Table({ content, cols, header, boldRows, centeredCols }) {\r\n  let tableHeader = header ? \r\n    <thead className='table_thead' ><tr>\r\n      {header.map(label => <th>{label}</th>)}\r\n    </tr></thead>\r\n    : ''\r\n\r\n  let tableBody = <tbody className='table_tbody' >\r\n    {content.map((row, i) => (\r\n      <tr>\r\n        {row.map((el, idx) => {\r\n          let colWidth = cols && cols[idx] ? \r\n              cols[idx][0] === '!' ? { width: cols[idx].slice(1) + 'px' } : {minWidth: cols[idx] + 'px'} \r\n            : {}\r\n          let colAlign = centeredCols.includes(idx) ? { textAlign: 'center' } : {}\r\n          return <td style={{ ...colWidth, ...colAlign }} \r\n            className={boldRows.includes(i) ? 'table_td__bold': ''}>\r\n            {isNaN(el) ? el : Number(el).toFixed(1)}\r\n          </td>\r\n        })}\r\n      </tr>\r\n    ))}\r\n  </tbody>\r\n\r\n  return (\r\n    <div className=\"table\">\r\n    <table className='table-tag'>\r\n      {tableHeader}\r\n      {tableBody}\r\n    </table>\r\n    </div>\r\n    \r\n  )\r\n}\r\nTable.defaultProps = {\r\n  content: [],\r\n  boldRows: [],\r\n  centeredCols: []\r\n }\r\n  \r\nexport default Table\r\n","import Table from './table'\r\n\r\nexport default Table","import React from 'react'\r\nimport './data-table.css'\r\n  \r\nconst leaders = {\r\n  dots: ' data-table_field-leader__dots',\r\n  centeredDots: ' data-table_field-leader__centered-dots',\r\n  none: ''\r\n}\r\nconst sizes = {\r\n  small: ' data-table__small',\r\n  normal: '',\r\n  large: ' data-table__large'\r\n}\r\n\r\n// fields: [{ name, label, value, unit: { name, accuracy } }]\r\nfunction DataTable({ name, fields, size, leader, separator, colorScheme }) {\r\n  let dataFields = fields.map((field, index) => (\r\n    <li className=\"data-table_field\" key={index} >\r\n      <div className=\"data-table_field-name\">{field.label || field.name}</div>\r\n      <div className={\"data-table_field-leader\" + leaders[leader]}></div>\r\n      {field.sign ? <div className=\"data-table_field-sign\">{field.sign}</div> : ''}\r\n      <div className=\"data-table_field-value\">\r\n        {Number(field.value).toFixed(field.unit.accuracy)}\r\n      </div>\r\n      <div className=\"data-table_field-unit\">{field.unit.name}</div>\r\n    </li>\r\n  ))\r\n\r\n  return (\r\n    <ul className={'data-table' + sizes[size]}>\r\n      {dataFields}\r\n    </ul>\r\n  )\r\n}\r\n\r\nDataTable.defaultProps = {\r\n  fields: [],\r\n  size: 'normal',\r\n  leader: 'dots',\r\n  separator: 'none',\r\n  colorScheme: 'main'\r\n}\r\n  \r\nexport default DataTable\r\n","import DataTable from './data-table'\r\n\r\nexport default DataTable","import React from 'react'\r\nimport './meal-plan.css'\r\nimport Table from '../table'\r\nimport DataTable from '../data-table'\r\n\r\nconst MEAL_NAMES = {\r\n  2: ['Завтрак', 'Ужин'],\r\n  3: ['Завтрак', 'Обед', 'Ужин'],\r\n  4: ['Завтрак', 'Перекус', 'Обед', 'Ужин'],\r\n  5: ['Завтрак', 'Перекус', 'Обед', 'Перекус', 'Ужин'],\r\n  6: ['Завтрак', 'Перекус', 'Обед', 'Перекус', 'Ужин', 'Перекус'],\r\n  7: ['Завтрак', 'Второй завтрак', 'Перекус', 'Обед', 'Перекус', 'Ужин', 'Перекус'],\r\n}\r\nconst COLUMN_NAMES = ['Продукт', 'Порция', 'Б', 'Ж', 'У', 'Энергия']\r\n\r\n\r\n\r\n\r\nfunction MealPlan({ plan }) {\r\n  let mealNames = MEAL_NAMES[plan.length]\r\n\r\n  \r\n  let mealPlan = plan.map((meal, mealNo) => {    \r\n    return <>\r\n      <h2>{mealNames && mealNames[mealNo]}</h2>\r\n      <div className=\"meal-plan_meal-table\">\r\n      <Table \r\n        content={meal} \r\n        header={!mealNo ? COLUMN_NAMES : null} \r\n        boldRows={[meal.length - 1]} \r\n        centeredCols={[1, 2, 3, 4, 5]} \r\n        cols={['!230', 65, 40, 40, 40, 70]}\r\n      />\r\n      </div>      \r\n    </>\r\n  })\r\n\r\n  return (\r\n    <div className='meal-plan'>\r\n      {mealPlan}\r\n    </div>\r\n  )\r\n}\r\nMealPlan.defaultProps = {\r\n  plan: [[], [], []]\r\n}\r\n  \r\nexport default MealPlan\r\n","import MealPlan from './meal-plan'\r\n\r\nexport default MealPlan","const jwtDecode = require('jwt-decode')\r\n\r\nexport const checkAuth = () => {\r\n  let accessToken = localStorage.getItem('access_token')\r\n  if (!accessToken) return false\r\n  let payload = jwtDecode(accessToken)\r\n  console.log(payload)\r\n  return payload.exp*1000 - Date.now() > 0\r\n}\r\n\r\nexport const checkRefresh = () => {\r\n  let refreshToken = localStorage.getItem('refresh_token')\r\n  if (!refreshToken) return false\r\n  let payload = jwtDecode(refreshToken)\r\n  console.log(payload)\r\n  return payload.exp*1000 - Date.now() > 0\r\n}\r\n\r\nexport const setTokenPair = (pair) => {\r\n  localStorage.setItem('access_token', pair.access)  \r\n  localStorage.setItem('refresh_token', pair.refresh)  \r\n  console.log('Saved access and refresh tokens to local storage', pair.access, pair.refresh)\r\n}\r\n\r\nexport const deleteTokens = () => {\r\n  localStorage.removeItem('access_token')\r\n  localStorage.removeItem('refresh_token')\r\n}\r\n\r\nexport const refreshToken = () => {\r\n  const REFRESH_URL = '/api/auth/refresh_token/'\r\n  let data = { refresh: localStorage.getItem('refresh_token') }\r\n  if (!data) throw({data: 'No refresh token', status: 400, logout: true})\r\n  return fetch(REFRESH_URL,\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }\r\n  )\r\n  .then(res => {\r\n    return res.json().then(json => {\r\n      return new Promise((resolve, reject) => {\r\n        if (res.ok) {\r\n          setTokenPair(json)\r\n          resolve({data: json, status: res.status})\r\n        } else if (res.status === 400 || res.status === 401) \r\n          reject({status: res.status, data: 'Could not refresh token', logout: true})\r\n        else \r\n          reject({status: res.status, data: 'Could not refresh token'})\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nexport const retryRequest = (req, url, method='POST') => {\r\n  let isPOST = method === 'POST'\r\n  \r\n  let FETCH_OPTIONS = (token) => ({\r\n    method,    \r\n    headers: {\r\n      'Authorization': 'Bearer ' + token\r\n    }    \r\n  })\r\n  let POST_FETCH_OPTIONS = (token) => ({\r\n    method,\r\n    headers: {\r\n      'Authorization': 'Bearer ' + token,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(req)\r\n  })\r\n  \r\n\r\n  console.log(`401 Unauthorized: ${url}`)\r\n  return refreshToken()\r\n  .then(res => {\r\n    console.log(`Retrying ${url}. Refresh tokens: `, res, res.status)\r\n    return new Promise(resolve => {\r\n      resolve(res.status)      \r\n    })\r\n  })\r\n  .then(status => {// if refreshed successfully try to request again\r\n    let token = localStorage.getItem('access_token')\r\n    console.log('Sending 2nd req')\r\n    return fetch(url, isPOST ? POST_FETCH_OPTIONS(token) : FETCH_OPTIONS(token))       \r\n  })\r\n  .then(res => { // 2nd attempt result\r\n    return res.json().then(json => {\r\n      return new Promise((resolve, reject) => {\r\n        if (res.ok) resolve({data: json, status: res.status})\r\n        else reject({status: res.status, data: '2nd attempt failed', logout: true})\r\n      })\r\n    })\r\n  })\r\n  \r\n  \r\n}","import React, { useState, useEffect, useParams } from 'react'\r\nimport domtoimage from 'dom-to-image'\r\nimport './meal-plan-page.css'\r\nimport Navbar from '../navbar'\r\nimport Window from '../window'\r\nimport Button from '../button'\r\nimport Table from '../table'\r\nimport MealPlan from '../meal-plan'\r\nimport { refreshToken, retryRequest } from '../../api/auth'\r\nimport DataTable from '../data-table'\r\n\r\n// const PLAN_SIZES = {\r\n//   3: [4, 4, 4]\r\n// }\r\n\r\nconst NUTRIENTS = {       \r\n  \"portion\": {\r\n    label: \"Масса\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"protein\": {\r\n    label: \"Белки\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"fat\": {\r\n    label: \"Жиры\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"carbohydrate\": {\r\n    label: \"Углеводы\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  }, \r\n  \"energy\": {\r\n    label: \"Энергетическая ценность\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'ккал'\r\n    }\r\n  },\r\n  \"water\": {\r\n    label: \"Вода\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мл'\r\n    }\r\n  },\r\n  \"sfa\": {\r\n    label: \"Насыщенные жирные кислоты\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"mds\": {\r\n    label: \"Моно- и дисахариды\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"starch\": {\r\n    label: \"Крахмал\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"fiber\": {\r\n    label: \"Пищевые волокна\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'г'\r\n    }\r\n  },\r\n  \"sodium\": {\r\n    label: \"Натрий\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"potassium\": {\r\n    label: \"Калий\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"calcium\": {\r\n    label: \"Кальций\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"magnesium\": {\r\n    label: \"Магний\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"phosphorus\": {\r\n    label: \"Фосфор\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"iron\": {\r\n    label: \"Железо\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"thiamine\": {\r\n    label: \"Витамин B1\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"riboflavin\": {\r\n    label: \"Витамин B2\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"niacin\": {\r\n    label: \"Витамин PP\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"beta_carotene\": {\r\n    label: \"Бета-каротин\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'µг'\r\n    }\r\n  },\r\n  \"vitamin_c\": {\r\n    label: \"Витамин C\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"cholesterol\": {\r\n    label: \"Холестерин\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'мг'\r\n    }\r\n  },\r\n  \"retinol\": {\r\n    label: \"Витамин A\",\r\n    unit: {\r\n      accuracy: 0.01,\r\n      name: 'µг'\r\n    }\r\n  }\r\n}\r\n\r\nconst FETCH_PLANS_URL ='/api/get_meal_plans/'\r\nconst GENERATE_PLAN_URL = '/api/generate_meal_plan/'\r\nconst AUTHORIZATION_HEADER = (token) => ({'Authorization': 'Bearer ' + token})\r\n\r\n\r\nfunction MealPlanPage({ auth, onAuth, onPlanRequest, awaitingNewPlan }) {\r\n  const [plans, setPlans] = useState([])\r\n  // const [planSizes, setPlanSizes] = useState(null)\r\n  const [parsedPlans, setParsedPlans] = useState([])\r\n  const [totalNutrients, setTotalNutrients] = useState([])\r\n  const [currentPlan, setCurrentPlan] = useState(0)\r\n\r\n\r\n  const parsePlan = (rawPln) => {\r\n    const NAN_FIELDS = ['name', 'categories', 'source_categories']\r\n    let rawPlan = {...rawPln}\r\n    let portions = rawPlan.portions\r\n    let planSize = rawPlan.size\r\n    \r\n    let parsed = Array(planSize).fill([])    \r\n    let totalMainNutrients = Array(planSize).fill([])\r\n    let allNutrients = {}\r\n\r\n    portions.forEach(rawPortion => {\r\n      let mealNo = rawPortion['meal_no'] - 1\r\n      let portion = rawPortion['food']\r\n\r\n      // for allNutrients\r\n      for (let [name, value] of Object.entries(portion)) {\r\n        if (!NAN_FIELDS.includes(name) && value) {\r\n          if (!(name in allNutrients)) {\r\n            allNutrients[name] = value\r\n          } else {\r\n            allNutrients[name] += value\r\n          }\r\n        }\r\n      }\r\n\r\n      let mainNutrients = [portion.portion, portion.protein, portion.fat, portion.carbohydrate, portion.energy]\r\n      \r\n      if (!totalMainNutrients[mealNo].length) {\r\n        totalMainNutrients[mealNo] = mainNutrients\r\n      } else {\r\n        totalMainNutrients[mealNo] = totalMainNutrients[mealNo].map((v, i) => v + mainNutrients[i])\r\n      }\r\n\r\n      parsed[mealNo] = [...parsed[mealNo], [portion.name, ...mainNutrients]]\r\n    })\r\n\r\n    // inserting nutrients values into template\r\n    allNutrients = Object.keys(NUTRIENTS).map(nutrient => (\r\n      { ...NUTRIENTS[nutrient], value: allNutrients[nutrient] }\r\n    ))\r\n\r\n    parsed = parsed.map((meal, i) => [ ...meal, ['Итого', ...totalMainNutrients[i]] ])\r\n    \r\n    return [ parsed, allNutrients ]\r\n   \r\n  }\r\n\r\n\r\n  const fetchPlans = () => {\r\n    console.log('fetching plans')\r\n    fetch(FETCH_PLANS_URL, { headers: AUTHORIZATION_HEADER(localStorage.getItem('access_token')) })\r\n    .then(res => {\r\n      if (!res.ok) throw {status: res.status, data: 'Failed to fetch'}\r\n      return res.json()\r\n    })\r\n    .then(res => {     \r\n      setPlans(res)      \r\n      let parsed = []\r\n      let nutrients = []\r\n      res.forEach(plan => {\r\n        let [ planParsed, planNutrients ] = parsePlan(plan)\r\n        parsed.push(planParsed)\r\n        nutrients.push(planNutrients)\r\n      })      \r\n      setParsedPlans(parsed)\r\n      setTotalNutrients(nutrients)\r\n    })\r\n    .catch(err => {\r\n      console.log('SOME ERROR')\r\n      console.log(err)\r\n      if (err.status === 401) return retryRequest(null, FETCH_PLANS_URL, 'GET')\r\n        .then(res => {\r\n          setPlans(res)      \r\n          let parsed = []\r\n          let nutrients = []\r\n          res.forEach(plan => {\r\n            let [ planParsed, planNutrients ] = parsePlan(plan)\r\n            parsed.push(planParsed)\r\n            nutrients.push(planNutrients)\r\n          })      \r\n          setParsedPlans(parsed)\r\n          setTotalNutrients(nutrients)\r\n          console.log('retryRequest successful', res.status, res.data)\r\n        })\r\n        .catch(err => {\r\n          if (err.logout) onAuth(false)\r\n          console.error('retryRequest error!', err.status, err.data, err)\r\n        })\r\n    })\r\n  }\r\n\r\n  const generateNewPlan = () => {\r\n    console.log('generating new plan')\r\n    fetch(GENERATE_PLAN_URL, { headers: AUTHORIZATION_HEADER(localStorage.getItem('access_token')) })\r\n    .then(res => {\r\n      if (!res.ok) throw {status: res.status, data: 'Failed to fetch'}\r\n      return res.json()\r\n    })\r\n    .then(res => {     \r\n      setPlans(prev => ([...prev, res]))          \r\n      let [ planParsed, planNutrients ] = parsePlan(res)                 \r\n      setParsedPlans(prev => ([...prev, planParsed]))\r\n      setTotalNutrients(prev => ([...prev, planNutrients]))\r\n    })\r\n    .catch(err => {      \r\n      if (err.status === 401) return retryRequest(null, GENERATE_PLAN_URL, 'GET')\r\n        .then(res => {\r\n          setPlans(prev => ([...prev, res.data]))          \r\n          let [ planParsed, planNutrients ] = parsePlan(res.data)                 \r\n          setParsedPlans(prev => ([...prev, planParsed]))\r\n          setTotalNutrients(prev => ([...prev, planNutrients]))\r\n          console.log('retryRequest successful', res.status, res.data)\r\n        })\r\n        .catch(err => {\r\n          if (err.logout) onAuth(false)\r\n          console.error('retryRequest error!', err.status, err.data, err)\r\n        })\r\n      else console.error(err)\r\n    })\r\n  }\r\n\r\n  const changeSelectedPlan = (dir) => {\r\n    let numberOfPlans = parsedPlans.length\r\n    let current = currentPlan\r\n    if (dir === 'next') {\r\n      if (current < numberOfPlans - 1)\r\n        setCurrentPlan(prev => prev + 1)\r\n      else\r\n        setCurrentPlan(0)\r\n    } else {\r\n      if (current === 0)\r\n        setCurrentPlan(numberOfPlans - 1)\r\n      else\r\n        setCurrentPlan(prev => prev - 1)\r\n    }\r\n  }\r\n\r\n  useEffect(() => { //fetching plans on auth\r\n    fetchPlans()\r\n  }, [auth])\r\n\r\n  useEffect(() => {\r\n    setCurrentPlan(parsedPlans.length - 1)\r\n    console.log('Change current plan')\r\n  }, [parsedPlans])\r\n\r\n  useEffect(() => {\r\n    if (awaitingNewPlan) {\r\n      onPlanRequest(false)\r\n      generateNewPlan()\r\n    }\r\n    \r\n  }, [awaitingNewPlan])\r\n\r\n\r\n  const saveAsPng = () => {\r\n    if (parsedPlans.length && parsedPlans[currentPlan].length) {\r\n      domtoimage.toPng(document.querySelector('.meal-plan'), { bgcolor: '#f5f6f6' })\r\n      .then(function (dataUrl) {\r\n          let link = document.createElement('a')\r\n          link.download = 'meal-plan.png'\r\n          link.href = dataUrl\r\n          link.click()\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='meal-plan-page' style={!auth ? { filter: 'blur(10px)' } : {}}>\r\n      <div className=\"meal-plan-page_navbar\">\r\n        <Navbar title='Пищевая ценность' size='350px' fontSize='24px' >\r\n          <DataTable fields={totalNutrients[currentPlan]} />\r\n        </Navbar>\r\n      </div>\r\n      <div className=\"meal-plan-page_main-area\">\r\n        <div className=\"meal-plan-page_container\">\r\n          <Window width='700px' blank className='meal-plan_header-window'>\r\n            <div className=\"meal-plan_header\">\r\n              <div className=\"meal-plan_title\"><h2>План питания</h2></div>\r\n              <div className=\"meal-plan_refresh\">\r\n                <Button type='corner' corner='top-right' text='↺' style={{ fontSize: '31px' }} onClick={generateNewPlan} />\r\n              </div>              \r\n              <div className='meal-plan_header-body'>\r\n                Нажмите <span onClick={saveAsPng} className='meal-plan_download'>сюда</span>, чтобы скачать план питания\r\n              </div>\r\n            </div>            \r\n          </Window>\r\n          <Window width='700px' empty={!parsedPlans.length} emptyText='Здесь ничего нет.\\Пожалуйста, укажите параметры.' >\r\n          <div className=\"meal-plan_select-buttons\">\r\n            <div className=\"meal-plan_prev-button\" onClick={() => changeSelectedPlan('prev')} >←</div>\r\n            <div className=\"meal-plan_next-button\" onClick={() => changeSelectedPlan('next')} >→</div>\r\n          </div> \r\n          <MealPlan plan={parsedPlans[currentPlan]} />                  \r\n          </Window>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nMealPlanPage.defaultProps = { }\r\n  \r\nexport default MealPlanPage\r\n","import MealPlanPage from './meal-plan-page'\r\n\r\nexport default MealPlanPage","import React from 'react'\r\nimport './input.css'\r\n\r\n// seems regex prop in Form === \"permitted characters\"\r\nfunction Input({ type, value, name, label, disabled, validityErrors, onChange, placeholder, maxLength, displayErrors, subtype }) {\r\n  let errorBorderStyle = validityErrors.length === 0 ? '' : ' input_input-tag__error'\r\n  let errorLabelStyle = validityErrors.length === 0 ? '' : ' input_label__error'\r\n  return (\r\n    <div className='input'>\r\n      <label className='input_label-tag'>\r\n        <div className={'input_label' + errorLabelStyle}>{label}</div> \r\n        <input className={'input_input-tag' + errorBorderStyle}\r\n          type={subtype || 'text'}\r\n          name={name}\r\n          value={value}\r\n          placeholder={placeholder || name}\r\n          disabled={disabled} \r\n          onChange={onChange}\r\n          maxLength={maxLength}\r\n        />\r\n      </label>\r\n      <ul className=\"input_validity-errors\">      \r\n        {displayErrors && validityErrors.map((err, index) => <li className=\"input_validity-error\" key={index}>{err}</li>)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nInput.defaultProps = {\r\n  type: 'text',\r\n  value: '',\r\n  name: 'Text',\r\n  disabled: false\r\n}\r\n\r\nexport default Input\r\n","import React from 'react'\r\nimport './radio-group.css'\r\nimport './input.css'\r\n  \r\nfunction RadioGroup({ name, label, options, value, onChange, validityErrors, displayErrors }) {\r\n  let errorBorderStyle = validityErrors.length === 0 ? '' : ' radio-group_options__error'\r\n  let errorLabelStyle = validityErrors.length === 0 ? '' : ' input_label__error'\r\n\r\n  let radios = options.map((option, index) => {\r\n    let selectedOptionStyle = (value === option.name) ? ' radio-group_option__selected' : ''\r\n    return (\r\n      <label className={'radio-group_option' + selectedOptionStyle} key={index}>            \r\n        <input \r\n          type='radio'\r\n          name={name}\r\n          value={option.name}\r\n          checked={value === option.name}\r\n          onChange={onChange}\r\n        />\r\n        <div className='radio-group_label'>\r\n          {option.label || option.name}\r\n        </div> \r\n      </label>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <div className='input'>\r\n      <div className={'input_label' + errorLabelStyle}>\r\n        {label || name}\r\n      </div>      \r\n      <div className={'radio-group_options' + errorBorderStyle}>\r\n        {radios}\r\n      </div>  \r\n      <ul className=\"input_validity-errors\">      \r\n        {displayErrors && validityErrors.map((err, index) => <li className=\"input_validity-error\" key={index}>{err}</li>)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nRadioGroup.defaultProps = {\r\n  options: [],\r\n  validityErrors: []\r\n}\r\n  \r\nexport default RadioGroup\r\n","import React, { useState } from 'react'\r\nimport './select.css'\r\nimport './input.css'\r\n  \r\nfunction Select({ name, label, options, value, onChange, double, validityErrors, displayErrors, dropdownWidth }) {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  let doubleSizeStyle = double ? ' select__double' : ''\r\n  let doubleSizeDropdownStyle = double ? ' select_dropdown__double' : ''\r\n\r\n\r\n  const handleExpand = (e) => {\r\n    setIsExpanded(prev => !prev)\r\n  }\r\n  const handleSelect = (e) => {\r\n    let value = e.currentTarget.id\r\n    onChange({ currentTarget: { value, name, type: 'select' }})\r\n  }\r\n/*\r\n  document.addEventListener('click', (e) => {\r\n    !document.querySelector('div.input.input__select').contains(e.target) && setIsExpanded(false)\r\n  })\r\n*/\r\n  let selected = options.filter(option => option.name === value).map((option, index) => (      \r\n    <div id={option.name} className=\"select_option\" key={index} >\r\n      <div className=\"select_option-label\">{option.label}</div>\r\n      <div className=\"select_option-description\">{option.description}</div>\r\n    </div>\r\n  ))  \r\n  let selectable = options.filter(option => option.name !== value).map((option, index) => (      \r\n    <div id={option.name} className=\"select_option\" onClick={handleSelect} key={index} >\r\n      <div className=\"select_option-label\">{option.label}</div>\r\n      <div className=\"select_option-description\">{option.description}</div>\r\n    </div>\r\n  ))  \r\n\r\n  let dropdown = <div className={'select_dropdown' + doubleSizeDropdownStyle}>    \r\n    {selected}\r\n    {selectable}\r\n  </div>\r\n\r\n\r\n  return(\r\n    <div className=\"input input__select\" onClick={handleExpand} >\r\n      <div className=\"input_label\">{label}</div>\r\n      <div className={'select' + doubleSizeStyle} name={name}>\r\n        {selected}\r\n      </div>\r\n      <div className=\"select_dropdown-container\" style={{ width: dropdownWidth*100 + '%' }}>\r\n        {isExpanded && dropdown}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nSelect.defaultProps = {\r\n  dropdownWidth: 1\r\n}\r\n\r\nexport default Select","import React, { useState, useEffect } from 'react'\r\nimport './slider.css'\r\nimport './input.css'\r\n  \r\n\r\n// only works with options\r\n// double sized\r\nfunction Slider({ name, label, options, value, onChange, double }) {\r\n  const [intValue, setIntValue] = useState(0)\r\n\r\n  useEffect(() => {\r\n    setIntValue(options.findIndex(option => option.name === value))\r\n  }, [value])\r\n\r\n  const handleOptionChange = (e) => {\r\n    let value = options[e.currentTarget.value].name\r\n    onChange({ currentTarget: { value, name, type: 'slider' }})\r\n  }\r\n  \r\n\r\n\r\n  return(\r\n    <div className=\"input\" >\r\n      <div className=\"input_label\">{label}</div>\r\n      <div className=\"slider_container\">\r\n        <div className='slider' >\r\n          <input \r\n            type='range' \r\n            value={intValue} \r\n            onChange={handleOptionChange} \r\n            min={0} \r\n            max={options.length - 1} \r\n            step={1} \r\n          />\r\n        </div>\r\n        <div className=\"slider_info\">\r\n          {options[intValue] && options[intValue].label}\r\n          <div className=\"slider_info-detailed\">\r\n            {options[intValue] && options[intValue].description}\r\n          </div>\r\n        </div>\r\n      </div>      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nSlider.defaultProps = {\r\n  options: []\r\n}\r\n\r\nexport default Slider","import React, { useEffect, useState } from 'react'\r\nimport './radio-group.css'\r\nimport './input.css'\r\nimport './checkbox-group.css'\r\n  \r\n\r\n// layout.length should be either 1 or 3\r\nfunction CheckboxGroup({ name, label, options, value, onChange, validityErrors, displayErrors, layout, tooltipWidth }) {\r\n  const [labelWidths, setLabelWidths] = useState({})\r\n  let errorBorderStyle = validityErrors.length === 0 ? '' : ' radio-group_options__error'\r\n  let errorLabelStyle = validityErrors.length === 0 ? '' : ' input_label__error'\r\n  let doubleSizeStyle = layout.length === 3 ? ' checkbox-group_options__double' : ''\r\n  \r\n  useEffect(() => { // updatig label widths in the tooltip based on actual widths\r\n    const ro = new ResizeObserver(entries => {\r\n      for (let entry of entries) {\r\n        let checkboxName = entry.target.dataset.name.split('--').slice(1).join('-')\r\n        setLabelWidths(prev => ({ ...prev, [checkboxName]: entry.contentRect.width }))\r\n      }\r\n    })\r\n    document.querySelectorAll('input[type=\"checkbox\"] ~ .radio-group_label').forEach(node => {\r\n      ro.observe(node)\r\n    })\r\n  }, [])\r\n \r\n\r\n  const handleChange = (e) => {\r\n    let values = new Set(value)\r\n    if (e.target.checked) \r\n      values.add(e.target.name)\r\n    else\r\n      values.delete(e.target.name)\r\n    onChange({ currentTarget: { value: [...values], name, type: 'checkbox' }})\r\n  }\r\n\r\n  if(!(layout.length === 1 || layout.length === 3))\r\n    throw new Error('layout.length should be 1 or 3')\r\n\r\n  let radios = options.map((option, index) => {\r\n    let selectedOptionStyle = (value && value.includes(option.name)) ? ' radio-group_option__selected' : ''\r\n    let tooltip = !option.description ? '' :\r\n      <div className=\"radio-group_tooltip-container\">\r\n        <div style={{ minWidth: tooltipWidth }} className=\"radio-group_tooltip\">\r\n          <div className=\"radio-group_tooltip-name radio-group_label\" style={{ width: labelWidths[option.name] }} >\r\n            {option.label}\r\n          </div>\r\n          <div className=\"radio-group_tooltip-description\">{option.description}</div> \r\n        </div>\r\n      </div>\r\n  \r\n\r\n    return (\r\n      <label className={'radio-group_option' + selectedOptionStyle} key={index}>            \r\n        <input \r\n          type='checkbox'\r\n          name={option.name}\r\n          checked={value ? value.includes(option.name) : false}\r\n          onChange={handleChange}\r\n        />\r\n        <div className='radio-group_label' data-name={name + '--' + option.name}>\r\n          {option.label || option.name}\r\n        </div> \r\n        {tooltip}\r\n      </label>\r\n    )\r\n  })\r\n\r\n  let rows = layout.map((val, index) => (\r\n    <div className=\"checkbox-group_options-row\" key={index}>\r\n      {radios.splice(0, val)}\r\n    </div>\r\n  ))\r\n  \r\n\r\n  return (\r\n    <div className='input'>\r\n      <div className={'input_label' + errorLabelStyle}>\r\n        {label || name}\r\n      </div>  \r\n      <div className={'radio-group_options checkbox-group_options' + errorBorderStyle + doubleSizeStyle}>\r\n        {rows}\r\n      </div>  \r\n      <ul className=\"input_validity-errors\">      \r\n        {displayErrors && validityErrors.map((err, index) => <li className=\"input_validity-error\" key={index}>{err}</li>)}\r\n      </ul>\r\n    </div>\r\n  )\r\n\r\n}\r\nCheckboxGroup.defaultProps = {\r\n  options: [],\r\n  validityErrors: [],\r\n  layout: [5],\r\n  tooltipWidth: '140px'\r\n}\r\n  \r\nexport default CheckboxGroup\r\n","import Input from './input'\r\nimport RadioGroup from './radio-group'\r\nimport Select from './select'\r\nimport Slider from './slider'\r\nimport CheckboxGroup from './checkbox-group'\r\n\r\nexport default Input\r\nexport { RadioGroup, Select, Slider, CheckboxGroup }","export const VALIDATION_ERRORS = { // '-p' is for errors with parameters (like min length)\r\n  0: 'Поле не должно быть пустым',  \r\n  '1-p': p => `Поле должно содержать не менее ${p} символов`\r\n}\r\nexport const VALIDATION_ERRORS_ALL = {\r\n  0: 'Заполните обязательные поля',\r\n  '1-p': p => `Не все поля удовлетворяют минимальному количеству символов`\r\n}\r\n\r\nexport const AUTH_GET_TOKEN_ERRORS = {\r\n  401: `Пользователя с такими данными не существует`\r\n}","import React, { useState, useEffect, Fragment } from 'react'\r\nimport { useCookies } from 'react-cookie'\r\nimport Input, { RadioGroup, Select, Slider, CheckboxGroup } from '../input'\r\nimport Button from '../button'\r\nimport './form.css'\r\n\r\nimport { VALIDATION_ERRORS, VALIDATION_ERRORS_ALL } from '../../errors'\r\n\r\n//sections : [{title, size, columns}]\r\n//change to useEffect \r\nfunction Form({ \r\n  fields,\r\n  formTitle, \r\n  submitText, \r\n  submitUrl,   \r\n  singleErrorList, \r\n  columns, \r\n  sections, //sections is incompatible with formTitle, columns\r\n  width, \r\n  dataToSend, \r\n  headers,\r\n  withAuth, \r\n  onResponse, \r\n  errorsToDisplay,\r\n  onFieldChange\r\n}) {\r\n  const [cookies, setCookie] = useCookies()\r\n  const [values, setValues] = useState({})\r\n  const [validityErrors, setValidityErrors] = useState({})\r\n  let regexs = fields.reduce((ac, field) => ({...ac, [field.name]: RegExp(field.regex) || /[\\s\\S]*/}), {})\r\n  let required = fields.reduce((ac, field) => ({...ac, [field.name]: !!field.required}), {})\r\n  let withMinLength = fields.reduce((ac, field) => ({...ac, [field.name]: field.minLength || 0}), {})\r\n\r\n  useEffect(() => {\r\n    let initValues = fields.reduce((ac, field) => ({...ac, [field.name]: field.initialValue || ''}), {})\r\n    let initValidityErrors = fields.reduce((ac, field) => ({...ac, [field.name]: {}}), {})\r\n    setValues(initValues)\r\n    setValidityErrors(initValidityErrors)\r\n  }, [fields])\r\n\r\n  const setValidityError = (fieldName, errID, errState, errParam=null) => {\r\n    setValidityErrors(prev => \r\n      ({\r\n      ...prev,\r\n      [fieldName]: {\r\n        ...prev[fieldName],\r\n        [errID]: [errState, errParam]\r\n      }\r\n      })\r\n    )\r\n  }\r\n\r\n  const matchesRegex = (fieldName, value) => (value === '' || regexs[fieldName].test(value))\r\n  const requiredFieldCheck = (fieldName, value) => {\r\n    let isError = (value === '' && required[fieldName])\r\n    setValidityError(fieldName, 0, isError)\r\n    return !isError\r\n  }\r\n  const minLengthCheck = (fieldName, value) => { // would only work \r\n    if (!withMinLength[fieldName]) return true\r\n    let isError = value.length !== 0 && value.length < withMinLength[fieldName]\r\n    setValidityError(fieldName, '1-p', isError, withMinLength[fieldName])\r\n    return !isError\r\n  }\r\n  const handleChange = (e) => {    \r\n    let target = e.currentTarget   \r\n    if (target.type === 'radio' || target.type === 'checkbox') {\r\n      requiredFieldCheck(target.name, target.value)\r\n      onFieldChange(target.name, target.value)\r\n      setValues(prev => ({\r\n        ...prev,\r\n        [target.name]: target.value\r\n      }))\r\n    } else {\r\n      if (matchesRegex(target.name, target.value)) {\r\n        requiredFieldCheck(target.name, target.value)\r\n        minLengthCheck(target.name, target.value)\r\n        onFieldChange(target.name, target.value)\r\n        setValues(prev => ({\r\n          ...prev,\r\n          [target.name]: target.value\r\n        }))\r\n      }\r\n    }          \r\n  }\r\n\r\n  const validateFields = () => {\r\n    let noReqFieldsEmpty = fields.filter(field => required[field.name]).reduce((allFields, field) => (\r\n      requiredFieldCheck(field.name, values[field.name]) && allFields\r\n    ), true)\r\n    let noErrors = Object.values(validityErrors).reduce((allFields, field) => (\r\n      Object.values(field).reduce((allErrors, err) => (\r\n        !err[0] && allErrors\r\n      ), true) && allFields\r\n    ), true)\r\n    return noReqFieldsEmpty && noErrors\r\n  }\r\n  const handleSubmit = (e) => {\r\n    let CSRFheader = cookies.csrftoken ? { 'X-CSRFToken': cookies.csrftoken } : {}\r\n    let authHeader = withAuth ? { 'Authorization': 'Bearer ' + localStorage.getItem('access_token') } : {}\r\n    validateFields() && fetch(submitUrl,\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify({...values, ...dataToSend}),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...CSRFheader,\r\n          ...headers,\r\n          ...authHeader\r\n        }\r\n      }\r\n    )\r\n    .then(res => {\r\n      res.json().then(json => {\r\n        onResponse({...values, ...dataToSend}, json, res.status, '/' + res.url.split('/').slice(3).join('/'))\r\n        console.log(res)\r\n      })\r\n    }) \r\n\r\n    e.preventDefault()\r\n  }\r\n  \r\n  let allErrorMessages = []\r\n  let inputs = fields.map((field, index) => {\r\n    let errors = validityErrors[field.name] || {}\r\n    let errorMessages = singleErrorList ?\r\n      Object.keys(errors).filter(errID => errors[errID][0]).map(errID => {         \r\n        let err = errID.includes('-p') ?\r\n          VALIDATION_ERRORS_ALL[errID](errors[errID][1]) : VALIDATION_ERRORS_ALL[errID]\r\n        return err\r\n      })\r\n    :\r\n      Object.keys(errors).filter(errID => errors[errID][0]).map(errID => {         \r\n        let err = errID.includes('-p') ?\r\n          VALIDATION_ERRORS[errID](errors[errID][1]) : VALIDATION_ERRORS[errID]\r\n        return err\r\n    })\r\n\r\n    errorMessages.forEach(msg => {\r\n      !allErrorMessages.includes(msg) && allErrorMessages.push(msg)\r\n    })\r\n    if (field.type === 'radio')\r\n      return <RadioGroup {...field} key={index} onChange={handleChange} value={values[field.name]} \r\n        validityErrors={errorMessages || []} displayErrors={!singleErrorList} />\r\n    else if (field.type === 'select')\r\n      return <Select {...field} key={index} onChange={handleChange} value={values[field.name]} \r\n        validityErrors={errorMessages || []} displayErrors={!singleErrorList} />\r\n    else if (field.type === 'slider')\r\n      return <Slider {...field} key={index} onChange={handleChange} value={values[field.name]} \r\n          validityErrors={errorMessages || []} displayErrors={!singleErrorList} />\r\n    else if (field.type === 'checkbox')\r\n      return <CheckboxGroup {...field} key={index} onChange={handleChange} value={values[field.name]} \r\n        validityErrors={errorMessages || []} displayErrors={!singleErrorList} />\r\n    else\r\n      return <Input {...field} onChange={handleChange} value={values[field.name]} \r\n        validityErrors={errorMessages || []} key={index} displayErrors={!singleErrorList} />\r\n  })\r\n\r\n  \r\n  let formValidityErrors = ((singleErrorList && allErrorMessages.length !== 0) || (errorsToDisplay.length !== 0)) &&\r\n    <ul className=\"form_validity-errors\">      \r\n      {singleErrorList && allErrorMessages.map((err, index) => <li className=\"form_validity-error\" key={index}>{err}</li>)}\r\n      {errorsToDisplay.map((err, index) => <li className=\"form_validity-error\" key={index}>{err}</li>)}\r\n    </ul> \r\n  \r\n\r\n  \r\n  let sectionsToRender = sections.length !== 0 ? sections : [{ title: formTitle, size: 100, columns }]  \r\n  let sectioned = sectionsToRender.map((section, index) => {\r\n    let sectionInputs = inputs.splice(0, section.size)\r\n    let sectionCols = { 'gridTemplateColumns': '1fr '.repeat(section.columns) }\r\n    let sectionDelimeter = index !== 0 ? <div className=\"form_section-delimeter\"></div> : ''\r\n    return (\r\n      <Fragment key={index}>\r\n      {sectionDelimeter}\r\n      {section.title && <div className='form_title'><h2>{section.title}</h2></div>}\r\n      <div className='form_fields' style={sectionCols}>\r\n          {sectionInputs}\r\n      </div>\r\n      </Fragment>\r\n    )\r\n  })\r\n\r\n  return (    \r\n    <form className='form' style={{width}} onSubmit={handleSubmit} noValidate autoComplete='off' >      \r\n      <div className='form_body'>        \r\n        {sectioned}\r\n        {formValidityErrors}       \r\n      </div>\r\n      <Button type='form' submit  />      \r\n    </form>\r\n)\r\n\r\n}\r\nForm.defaultProps = {\r\n  fields: [],\r\n  columns: 1,\r\n  singleErrorList: true,\r\n  formTitle: '',\r\n  dataToSend: {},\r\n  headers: {},\r\n  errorsToDisplay: [],\r\n  onFieldChange: () => {},\r\n  sections: []\r\n}\r\n  \r\nexport default Form\r\n","import Form from './form'\r\n\r\nexport default Form","import React from 'react'\r\nimport './data-square.css'\r\n  \r\n// {name, label, value, unit: {name, accuracy}, alternativeUnits: [{name, rate, accuracy }] }\r\nfunction DataSquare({ name, label, value, unit, alternativeUnits }) {\r\n\r\n  let mainField = <div className=\"data-square_field\" key={-1}>{Number(value).toFixed(unit.accuracy) + ' ' + unit.name}</div>\r\n\r\n  let fields = alternativeUnits.map((unit, index) => (\r\n    <div className=\"data-square_field\" key={index} >{Number(value*unit.rate).toFixed(unit.accuracy) + ' ' + unit.name}</div>\r\n  ))\r\n\r\n  return (\r\n    <div className='data-square'>\r\n      <div className='data-square_title'>{label || name}</div>\r\n      <div className='data-square_fields'>{[mainField, ...fields]}</div>                \r\n    </div>\r\n  )\r\n}\r\nDataSquare.defaultProps = {\r\n  label: 'Title',\r\n  value: 6,\r\n  unit: {\r\n    name: 'kg',\r\n    accuracy: 1\r\n  },\r\n  alternativeUnits: []  \r\n }\r\n  \r\nexport default DataSquare\r\n","import DataSquare from './data-square'\r\n\r\nexport default DataSquare","import React from 'react'\r\nimport './result-section.css'\r\nimport DataSquare from '../data-square'  \r\n\r\n\r\nfunction ResultSection({ input, result, model, layout }) {\r\n  let layoutStyle = layout === 'row' ? ' result-section__row' : ''\r\n\r\n  let sourceFields = model['SOURCE_FIELDS'].map((field, index) => {\r\n    let fieldName = field['LABEL'] || field['NAME']\r\n    let fieldValue = field['CATEGORIAL'] ?\r\n      field['VALUES'].find(v => v['NAME'] === input[field['NAME']])['LABEL'] || input[field['NAME']]\r\n        :\r\n      input[field['NAME']] + (field['UNIT'] ? ' ' + field['UNIT'] : '')\r\n    return (\r\n      <div className=\"result-section_source\" key={index}>\r\n        <div className=\"result-section_source-name\">{fieldName}</div>\r\n        <div className=\"result-section_source-value\">{fieldValue}</div>\r\n      </div>\r\n    )\r\n  })\r\n\r\n  let dataSquare = {\r\n    label: model['LABEL_TO_PREDICT']['LABEL'] || model['LABEL_TO_PREDICT']['NAME'],\r\n    name: model['LABEL_TO_PREDICT']['NAME'],\r\n    value: result,\r\n    unit: {\r\n      name: model['LABEL_TO_PREDICT']['UNIT'],\r\n      accuracy: model['LABEL_TO_PREDICT']['ACCURACY']\r\n    },\r\n    alternativeUnits: model['LABEL_TO_PREDICT']['ALTERNATIVE_UNITS'].map(unit => (\r\n      { name: unit['UNIT'], rate: unit['RATE'], accuracy: unit['ACCURACY']}\r\n    ))    \r\n  }\r\n\r\n  return (\r\n    <div className={'result-section' + layoutStyle}>\r\n      <div className='result-section_sources'>\r\n        <div className='result-section_sources-title'>Параметры</div>\r\n        {sourceFields}\r\n      </div>\r\n      <div className=\"result-section_results\">\r\n        <DataSquare {...dataSquare} />\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}\r\nResultSection.defaultProps = {\r\n  layout: 'column'\r\n}\r\n  \r\nexport default ResultSection\r\n","import ResultSection from './result-section'\r\n\r\nexport default ResultSection","import React from 'react'\r\nimport './model-info-section.css'\r\nimport { ResponsiveScatterPlotCanvas } from '@nivo/scatterplot'\r\n\r\n\r\nfunction ModelInfoSection({ model }) {\r\n  let points = []\r\n  model && model['PREDICTED_VALUES'].forEach((val, index) => {\r\n    points.push({'x': val, 'y': model['TRUE_VALUES'][index]})\r\n  })\r\n  let data = [{\r\n    id: 'ПОО',\r\n    data: points\r\n  }]\r\n\r\n  let metricsTable = <table>\r\n    <tr>\r\n      <th>Метрика</th>\r\n      <th>Значение</th>\r\n    </tr>\r\n    {model['TEST_METRICS'].map(metric => (\r\n        <tr>\r\n          <td>{metric['FULL_LABEL']}</td>\r\n          <td>{metric['VALUE'].toFixed(4)}</td>\r\n        </tr>\r\n    ))}\r\n  </table>\r\n\r\n  return (\r\n    <div className='model-info-section'>\r\n    <div className='model-info-section_plot'>\r\n       <ResponsiveScatterPlotCanvas\r\n        data={data}\r\n        margin={{ top: 40, right: 60, bottom: 40, left: 60 }}\r\n        xScale={{ type: 'linear', min: 0, max: 12.055 }}\r\n        xFormat={function(e){return e.toFixed(3)+\" МДж/сут\"}}\r\n        yScale={{ type: 'linear', min: 0, max: 12.055 }}\r\n        yFormat={function(e){return e.toFixed(3)+\" МДж/сут\"}}\r\n        nodeSize={2}\r\n        colors={'#A4145A'}\r\n        axisTop={null}\r\n        axisRight={null}\r\n        axisBottom={{\r\n            orient: 'bottom',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'Предсказанные значения',\r\n            legendPosition: 'middle',\r\n            legendOffset: 35\r\n        }}\r\n        axisLeft={{\r\n            orient: 'left',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'Фактические значения',\r\n            legendPosition: 'middle',\r\n            legendOffset: -35\r\n        }}\r\n    />\r\n    </div>\r\n    {metricsTable}\r\n    </div>\r\n  )\r\n}\r\nModelInfoSection.defaultProps = { }\r\n  \r\nexport default ModelInfoSection\r\n\r\n\r\n","import ModelInfoSection from './model-info-section'\r\n\r\nexport default ModelInfoSection","import React, { useState, useEffect } from 'react'\r\nimport './model.css'\r\nimport {\r\n  BrowserRouter as Router,\r\n  useParams,\r\n  Redirect\r\n} from 'react-router-dom'\r\nimport Form from '../form'\r\nimport Window from '../window'\r\nimport ResultSection from '../result-section'\r\nimport ModelInfoSection from '../model-info-section'\r\n\r\nconst parseModel = (model) => {\r\n  let fields = model['SOURCE_FIELDS'].map(field => {\r\n    if (!field['CATEGORIAL']) \r\n      return { \r\n        name: field['NAME'],\r\n        label: (field['LABEL'] || field['NAME']) + (field['UNIT'] ? ` (${field['UNIT']})` : ''),\r\n        type: 'text',\r\n        regex: \"^-?([0-9]+([.][0-9]*)?|[.][0-9]+)$\",\r\n        required: true,\r\n        maxLength: 5,\r\n        placeholder: field['DEFAULT_VALUE']\r\n      }\r\n    else \r\n      return {\r\n        name: field['NAME'],\r\n        label: field['LABEL'] || field['NAME'],\r\n        type: 'radio',\r\n        options: field['VALUES'].map(opt => Object.fromEntries(Object.entries(opt).map(([k, v]) => [k.toLowerCase(), v]))),\r\n        initialValue: field['DEFAULT_VALUE']\r\n      }    \r\n  })  \r\n  \r\n  return(fields)\r\n}\r\n\r\nfunction Model({ model, request, result, onResponse }) {\r\n  if (!model) return <Redirect to='/models' />\r\n\r\n  const dataToSend = {MODEL_NAME: model.MODEL_NAME}\r\n\r\n  const parseResponse = (req, res) => {\r\n    Object.keys(dataToSend).forEach(key => {\r\n      delete req[key]\r\n    })\r\n    onResponse(model.MODEL_NAME, req, +res)\r\n  }\r\n\r\n  let form = <Form \r\n    fields={parseModel(model)}\r\n    columns={2} \r\n    dataToSend={dataToSend}\r\n    submitUrl='/api/predict/' \r\n    formTitle={model.MODEL_TITLE || model.MODEL_NAME}\r\n    onResponse={parseResponse}\r\n  />\r\n  \r\n  let resultSection = result && request && \r\n    <Window  title='Результаты'>\r\n      <ResultSection \r\n        input={request}\r\n        model={model} \r\n        result={result} \r\n        layout='col'\r\n      />\r\n    </Window>\r\n\r\n    \r\n  \r\n  return (\r\n    <div className='model'>\r\n      <Window width='500px' className='model-info-window'><ModelInfoSection model={model} /> </Window>\r\n      <Window blank width='420px'>{form}</Window>\r\n      {resultSection}\r\n      {/*Object.keys(requests[model.MODEL_NAME]).map(key=>requests[model.MODEL_NAME][key])*/}\r\n    </div>\r\n  )\r\n}\r\nModel.defaultProps = {\r\n  \r\n}\r\n  \r\nexport default Model\r\nexport { parseModel }\r\n","import React, { useState, useEffect } from 'react'\r\nimport './model.css'\r\nimport {\r\n  BrowserRouter as Router,\r\n  useParams,\r\n  Redirect\r\n} from 'react-router-dom'\r\nimport Model from './model'\r\n\r\n\r\nfunction ModelRouter({ models }) {\r\n  const [results, setResults] = useState({})\r\n  const [requests, setRequests] = useState({})\r\n\r\n  const handleResponse = (modelName, req, res) => {\r\n    setRequests(prev => ({...prev, [modelName]: req}))\r\n    setResults(prev => ({...prev, [modelName]: res}))\r\n  }\r\n\r\n  let { modelName } = useParams()\r\n  let model = models.find(m => m['MODEL_NAME'] === modelName)\r\n  useEffect(() => {\r\n    console.log('Model rerender')\r\n  }, [model])  \r\n  if (!model) return <Redirect to='/models' />\r\n\r\n  \r\n  return (\r\n    <Model model={model} result={results[modelName]} request={requests[modelName]} onResponse={handleResponse} />\r\n  )\r\n}\r\nModelRouter.defaultProps = {\r\n  \r\n}\r\n  \r\nexport default ModelRouter\r\n","import React from 'react'\r\nimport './model-link.css'\r\nimport { NavLink, useRouteMatch } from 'react-router-dom'\r\n\r\nfunction ModelLink({ name, title, description, to, exact }) {\r\n  /*\r\n  let match = useRouteMatch({\r\n    path: to,\r\n    exact: activeWhenExact\r\n  })*/\r\n  //let activeLinkStyle = match ? ' model-link__active' : ''\r\n  return (\r\n    <NavLink to={to} activeClassName='model-link__active' className='model-link' exact={exact}>           \r\n      <div className='model-link_name'>\r\n        {title}\r\n      </div>\r\n      <div className='model-link_description'>\r\n        {description}\r\n      </div>          \r\n    </NavLink>\r\n  )\r\n}\r\nModelLink.defaultProps = {\r\n  exact: false\r\n}\r\n  \r\nexport default ModelLink\r\n","import ModelLink from './model-link'\r\n\r\nexport default ModelLink","import React, { useEffect, useState } from 'react'\r\nimport { Link, Switch, Route } from 'react-router-dom'\r\nimport './models-page.css'\r\nimport Navbar from '../navbar'  \r\nimport {ModelRouter} from '../model'\r\nimport ModelLink from '../model-link'\r\n\r\nconst FETCH_URL = '/api/get_models/'\r\n\r\nfunction ModelsPage() {\r\n  const [models, setModels] = useState(null)\r\n\r\n  useEffect(() => {\r\n    fetch(FETCH_URL)\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      setModels(res)\r\n    })\r\n    .catch(err => console.error('ERROR: ', err))\r\n  }, [])\r\n\r\n  let modelLinks = models && models.map((model, index) => \r\n    <ModelLink key={index}\r\n      name={model.MODEL_NAME} \r\n      title={model.MODEL_TITLE || model.MODEL_NAME} \r\n      description={model.MODEL_DESCRIPTION} \r\n      to={'/models/' + model.MODEL_NAME}\r\n    />\r\n  )\r\n\r\n  return (\r\n    <div className='models-page'>\r\n      <div className='models-page_navbar'>\r\n        <Navbar title='Модели' size='350px' fontSize='24px' >\r\n          {modelLinks}\r\n        </Navbar>\r\n      </div>\r\n      <div className='models-page_main-area'>\r\n      <Switch>\r\n        <Route exact path='/models' />\r\n        <Route path='/models/:modelName' children={models && <ModelRouter models={models} />} />\r\n      </Switch>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nModelsPage.defaultProps = { }\r\n  \r\nexport default ModelsPage\r\n","import ModelsPage from './models-page'\r\n\r\nexport default ModelsPage","import React, { useState, useEffect } from 'react'\r\nimport './login.css'\r\nimport Form from '../form'\r\n\r\nimport { AUTH_GET_TOKEN_ERRORS } from '../../errors'\r\n\r\nconst LOGIN_URL = '/api/auth/get_token/'\r\n\r\n\r\n\r\nfunction Login({ form, username, onSuccess }) {\r\n  const [errors, setErrors] = useState([])  \r\n  const [fields, setFields] = useState(null)\r\n\r\n  const handleResponse = (req, res, status) => {\r\n    if (status === 200) {\r\n      setErrors([])\r\n      onSuccess(res, req.username)\r\n    } else setErrors([{ errID: status, error: AUTH_GET_TOKEN_ERRORS[status] }])\r\n  }\r\n\r\n  useEffect(() => {\r\n    let user = username || localStorage.getItem('username') || null\r\n    setFields(user ? form.map(field => (field.name === 'username' ? {...field, initialValue: user} : field)) : form)\r\n  }, [])\r\n\r\n\r\n  //let fields = username ? form.map(field => (field.name === 'username' ? {...field, initialValue: username} : field)) : form\r\n  let loginForm = fields ? <Form\r\n    columns={1} \r\n    singleErrorList={false}\r\n    submitUrl={LOGIN_URL}\r\n    fields={fields} \r\n    formTitle={'Войти в аккаунт'}\r\n    onResponse={handleResponse}\r\n    errorsToDisplay={errors.map(err => err.error)}\r\n    onFieldChange={() => setErrors([])}\r\n  /> : ''\r\n\r\n  return (\r\n    <div className='login'>\r\n      {loginForm}\r\n    </div>\r\n  )\r\n}\r\nLogin.defaultProps = {\r\n  username: null\r\n}\r\n  \r\nexport default Login\r\n","import Login from './login'\r\n\r\nexport default Login","import React, { useState, useEffect } from 'react'\r\nimport Form from '../form'\r\nimport './register.css'\r\n  \r\nconst REGISTER_URL = '/api/auth/create/'\r\n\r\nfunction Register({ form, onSuccess }) {\r\n  //const [status, setStatus] = useState(null)\r\n  const [errors, setErrors] = useState([])  \r\n\r\n  \r\n  const handleResponse = (req, res, status) => {\r\n    if (res.username) {\r\n      //setStatus(res.username)\r\n      setErrors([])\r\n      onSuccess(res.username)\r\n    } else setErrors(res)\r\n  }\r\n\r\n\r\n  let registrationForm = form ? <Form\r\n    columns={1} \r\n    singleErrorList={false}\r\n    submitUrl={REGISTER_URL}\r\n    fields={form} \r\n    formTitle={'Регистрация'}\r\n    onResponse={handleResponse}\r\n    errorsToDisplay={errors.map(err => err.error)}\r\n    onFieldChange={() => setErrors([])}\r\n  /> : ''\r\n\r\n\r\n  return (\r\n    <div className='register'>\r\n      {registrationForm}\r\n    </div>\r\n  )\r\n}\r\nRegister.defaultProps = { }\r\n  \r\nexport default Register\r\n","import Register from './register'\r\n\r\nexport default Register","import React, { useState, useEffect } from 'react'\r\nimport './auth-modal.css'\r\nimport Login from '../login'  \r\nimport Register from '../register'\r\nimport Window from '../window'\r\n\r\nimport { setTokenPair } from '../../api/auth'\r\n\r\nconst FETCH_FORMS_URL = '/api/get_forms/?forms=register,login'\r\n\r\n\r\nfunction AuthModal({ onAuth }) {\r\n  const [forms, setForms] = useState(null)\r\n  const [state, setState] = useState('login')\r\n  const [username, setUsername] = useState(null)\r\n\r\n  useEffect(() => {\r\n    fetch(FETCH_FORMS_URL)\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      setForms(res)\r\n    })\r\n    .catch(err => console.error('ERROR: ', err))\r\n  }, [])\r\n\r\n  const handleRegistration = (user) => {\r\n    setUsername(user)\r\n    setState('login')\r\n  }\r\n  const handleLogin = (tokens, user) => {\r\n    setTokenPair(tokens)\r\n    localStorage.setItem('username', user)\r\n    onAuth(true)\r\n  }\r\n\r\n\r\n  let login = forms && <Login onSuccess={handleLogin} username={username} form={forms.login} />\r\n  let register = forms && <Register onSuccess={handleRegistration} form={forms.register} />\r\n  let titleBlock = state === 'login' ? \r\n    <Window width='500px' title='Новый пользователь?' style={{ marginBottom: '15px' }}>\r\n       Перейти к <span onClick={() => setState('register')} className='auth-modal_link'>регистрации</span>\r\n    </Window>\r\n  :\r\n    <Window width='500px' title='Уже есть аккаунт?' style={{ marginBottom: '15px' }}>\r\n      Нажмите <span onClick={() => setState('login')} className='auth-modal_link'>здесь</span>, чтобы войти\r\n    </Window>\r\n  \r\n  return (\r\n    <div className='auth-modal_container'>\r\n      <div className=\"auth-modal\">\r\n        {titleBlock}\r\n        <Window blank width='500px' >{state === 'login' ? login : register}</Window>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nAuthModal.defaultProps = { }\r\n  \r\nexport default AuthModal\r\n","import AuthModal from './auth-modal'\r\n\r\nexport default AuthModal","import React, { useState, useEffect, Fragment } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport './preferences-page.css'\r\nimport Window from '../window'\r\nimport DataTable from '../data-table'\r\nimport DataSquare from '../data-square'\r\nimport Button from '../button'\r\nimport Form from '../form'\r\nimport { refreshToken, retryRequest } from '../../api/auth'\r\n\r\nconst POST_PARAMETERS_URL = '/api/save_user_params/'\r\nconst POST_PREFERENCES_URL = '/api/user_preferences/'\r\n\r\nconst FETCH_FORMS_URL = '/api/get_preferences_page/'\r\nconst AUTHORIZATION_HEADER = (token) => ({'Authorization': 'Bearer ' + token})\r\n\r\nconst dummyNutrients = [\r\n    { label: 'Пищ. волокна', value: 30, unit:  { name: 'г', accuracy: 0.01 } },\r\n    { label: 'НЖК', value: 25, unit:  { name: 'г', accuracy: 0.01 }, sign: '<' },\r\n    { label: 'ПНЖК', value: 11, unit:  { name: 'г', accuracy: 0.01 }, sign: '>' },\r\n    { label: 'Холестерин', value: 300, unit:  { name: 'мг', accuracy: 0.01 }, sign: '<' },\r\n    { label: 'Натрий', value: 2400, unit:  { name: 'мг', accuracy: 0.01 }, sign: '<' },\r\n    { label: 'Калий', value: 3500, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Кальций', value: 1000, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Фосфор', value: 1000, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Йод', value: 150, unit:  { name: 'μг', accuracy: 0.01 } },\r\n    { label: 'Магний', value: 400, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Железо', value: 14, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Цинк', value: 9.5, unit:  { name: 'мг', accuracy: 0.01 } },\r\n]\r\n\r\nconst dummyNutrients2 = [\r\n    { label: 'Витамин A', value: 1, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин B1', value: 1.5, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин B2', value: 1.8, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин B3', value: 20, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин B6', value: 1.3, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин B9', value: 400, unit:  { name: 'μг', accuracy: 0.01 } },\r\n    { label: 'Витамин B12', value: 2.4, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин C', value: 70, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин D', value: 15, unit:  { name: 'μг', accuracy: 0.01 } },\r\n    { label: 'Витамин E', value: 10, unit:  { name: 'мг', accuracy: 0.01 } },\r\n    { label: 'Витамин K', value: 120, unit:  { name: 'μг', accuracy: 0.01 } },\r\n\r\n]\r\n\r\nfunction PreferencesPage({ auth, onAuth, onPlanRequest }) {\r\n  const [forms, setForms] = useState(null)\r\n  const [state, setState] = useState([])\r\n  const [toMealPlan, setToMealPlan] = useState(false)\r\n\r\n  const fetchForms = () => {\r\n    fetch(FETCH_FORMS_URL, { headers: AUTHORIZATION_HEADER(localStorage.getItem('access_token')) })\r\n    .then(res => {\r\n      if (!res.ok) throw {status: res.status, data: 'Failed to fetch'}\r\n      return res.json()\r\n    })\r\n    .then(res => {     \r\n      setForms(res.data)\r\n      setState(res.status)\r\n    })\r\n    .catch(err => {\r\n      if (err.status === 401) return retryRequest(null, FETCH_FORMS_URL, 'GET')\r\n        .then(res => {\r\n          setForms(res.data.data)\r\n          setState(res.data.status)\r\n          console.log('retryRequest successful', res.status, res.data)\r\n        })\r\n        .catch(err => {\r\n          if (err.logout) onAuth(false)\r\n          console.error('retryRequest error!', err.status, err.data, err)\r\n        })\r\n    })\r\n  }\r\n\r\n  useEffect(() => { //fetching forms\r\n    fetchForms()\r\n  }, [auth])\r\n\r\n  const setNewRequirements = (requirements) => {\r\n    let energy = forms['energy'].map(field => ({ ...field, value: requirements[field.name] }))\r\n    let nutrients = forms['nutrients'].map(field => ({ ...field, value: requirements[field.name] }))\r\n    setForms(prev => ({...prev, energy, nutrients}))\r\n    !state.includes('energy') && setState(prev => ([...prev, 'energy', 'nutrients']))    \r\n  }\r\n\r\n  const handleResponse = (req, res, status, url) => { // handle resonse from protected view    \r\n    if (status === 401) retryRequest(req, url)\r\n      .then(res => {\r\n        console.log('retryRequest successful', res.status, res.data)\r\n        if (res.data.data && res.data.data.requirements)\r\n          setNewRequirements(res.data.data.requirements)   \r\n      })\r\n      .catch(err => {\r\n        if (err.logout) onAuth(false)\r\n        console.error('retryRequest error!', err.status, err.data, err)\r\n      })\r\n    else {\r\n      console.log('Response!: ', req, res, status)\r\n      if (res.data && res.data.requirements)\r\n        setNewRequirements(res.data.requirements)      \r\n    }\r\n  }\r\n  \r\n  let physParamsPALGoalSections = [\r\n    { title: 'Физиологические параметры', size: 4, columns: 4 },\r\n    { title: 'Физическая активность & цель', size: 2, columns: 2 },\r\n  ]\r\n  let physParamsPALGoalForm = forms && forms['phys-params-PAL-goal'] ? <Form\r\n    singleErrorList={true}\r\n    //dataToSend={dataToSend}\r\n    submitUrl={POST_PARAMETERS_URL} \r\n    fields={forms['phys-params-PAL-goal']} \r\n    sections={physParamsPALGoalSections}\r\n    onResponse={handleResponse}\r\n    withAuth\r\n  /> : ''\r\n\r\n  \r\n  let foodPrefsForm = forms && forms['food-preferences'] ? <Form\r\n    columns={2} \r\n    singleErrorList={true}\r\n    fields={forms['food-preferences']} \r\n    submitUrl={POST_PREFERENCES_URL} \r\n    formTitle={'Предпочтения'}\r\n    onResponse={handleResponse}\r\n    withAuth\r\n  /> : ''\r\n\r\n  let energySquares = forms && forms['energy'] ? forms['energy'].map((square, index) => <DataSquare key={index} {...square} />) : ''\r\n  let macronutrientsTable = forms && forms['nutrients'] ? <DataTable fields={forms['nutrients']} /> : ''\r\n\r\n  if (toMealPlan) {\r\n    onPlanRequest(true)\r\n    return <Redirect to='/meal-plan' />\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n    <div className='preferences-page' style={!auth ? { filter: 'blur(10px)' } : {}}>\r\n      <div className=\"preferences-page_main-area\">\r\n        <div className=\"preferences-page_grid\">\r\n        <Window blank width='600px' className='preferences-page_phys-params' style={{ zIndex: 1 }}>\r\n          {physParamsPALGoalForm}\r\n        </Window>       \r\n        <Window blank width='600px' className='preferences-page_food-prefs'>\r\n          {foodPrefsForm}          \r\n        </Window>\r\n        <Window \r\n          blank width='610px'            \r\n          className='nutrients'\r\n          empty={!state.includes('energy')} \r\n          emptyText='Здесь ничего нет.\\Пожалуйста, укажите параметры.'\r\n        >\r\n          <div className=\"nutrients_grid\">\r\n            <div className=\"nutrients_title\"><h2>Потребности и рекомендации</h2></div>\r\n            <div className=\"nutrients_energy\">\r\n              {energySquares}\r\n            </div>\r\n            <div className=\"nutrients_main-nutrients\">\r\n              {macronutrientsTable}\r\n            </div>\r\n            <div className=\"nutrients_other-title\">\r\n              <h3>Питательные вещества</h3>\r\n            </div>\r\n            <div className=\"nutrients_other-nutrients-1\">\r\n              <DataTable fields={dummyNutrients} />\r\n            </div>\r\n            <div className=\"nutrients_other-nutrients-2\">\r\n              <DataTable fields={dummyNutrients2} />\r\n            </div>\r\n            <div className=\"nutrients_button\">\r\n              <Button type='corner' corner='bottom-right' text='Рассчитать рацион' onClick={() => setToMealPlan(true)} />\r\n            </div>\r\n          </div>          \r\n        </Window>\r\n        </div>      \r\n      </div>\r\n    </div>\r\n    \r\n    </Fragment>\r\n  )\r\n}\r\nPreferencesPage.defaultProps = { }\r\n  \r\nexport default PreferencesPage\r\n","import PreferencesPage from './preferences-page'\r\n\r\nexport default PreferencesPage","import React, {useState, useEffect} from 'react'\r\nimport { Switch, Route, Redirect, Link, useLocation } from 'react-router-dom'\r\nimport MealPlanPage from './components/meal-plan-page'\r\nimport ModelsPage from './components/models-page'\r\nimport AuthModal from './components/auth-modal'\r\nimport './App.css'\r\nimport PreferencesPage from './components/preferences-page'\r\nimport Navbar from './components/navbar'\r\n\r\nimport { checkAuth, refreshToken, checkRefresh, deleteTokens } from './api/auth'\r\n\r\nconst jwtDecode = require('jwt-decode')\r\n\r\nfunction App() {\r\n  const location = useLocation()\r\n  const [auth, setAuth] = useState(null)\r\n  const [awaitingNewPlan, setAwaitingNewPlan] = useState(false)\r\n\r\n  const protectedRoutes = ['/preferences', '/preferences/', '/meal-plan', '/meal-plan/']\r\n  \r\n  useEffect(() => { //check auth\r\n    let isAuth = checkAuth()\r\n    console.log('isAuth', isAuth)    \r\n    if (!isAuth) {\r\n      if (!checkRefresh()) \r\n        setAuth(false)\r\n      else refreshToken()\r\n        .then((res) => {\r\n          console.log('refreshToken: ', res)\r\n          res.status === 200 && setAuth(true)\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n    } else {\r\n      setAuth(true)\r\n    }        \r\n  }, [])\r\n\r\n  useEffect(() => { // test protected views\r\n    fetch('/api/closed/',\r\n      {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + localStorage.getItem('access_token')\r\n        }\r\n      }\r\n    )\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      console.log('closed: ', res)\r\n    })\r\n  }, [])\r\n\r\n  let authModal = protectedRoutes.includes(location.pathname) && !auth ? <AuthModal onAuth={(state) => setAuth(state)} /> : ''\r\n\r\n  return (\r\n    <div className='app'>\r\n      <Navbar title='Nutrition helper' position='horizontal' size='70px' zIndex={100} stickToEnd={1} >\r\n        <Link to='/models'>Модели</Link>\r\n        <Link to='/preferences'>Параметры</Link>\r\n        <Link to='/meal-plan'>План питания</Link>\r\n        <div onClick={() => {deleteTokens(); setAuth(false)}}>{auth && localStorage.getItem('username') || ''}</div>\r\n      </Navbar>\r\n      <div className=\"app_main\">\r\n      <Switch>\r\n        <Route exact path='/' render={() => <Redirect to='/models' />} />\r\n        <Route path='/models' component={ModelsPage} />\r\n        <Route path='/preferences' render={() => <PreferencesPage \r\n          auth={auth} \r\n          onAuth={(state) => setAuth(state)} \r\n          onPlanRequest={(state) => setAwaitingNewPlan(state)}\r\n        />} />\r\n        <Route path='/meal-plan' render={() => <MealPlanPage\r\n          auth={auth} \r\n          onAuth={(state) => setAuth(state)}\r\n          onPlanRequest={(state) => setAwaitingNewPlan(state)}\r\n          awaitingNewPlan={awaitingNewPlan}\r\n        />} />\r\n        <Route render={() => <Redirect to='/' />} />\r\n      </Switch>\r\n      {authModal}\r\n      </div>    \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { CookiesProvider } from 'react-cookie'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <CookiesProvider>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n    </CookiesProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}